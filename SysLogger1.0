#syslogger1.0
#compiled by: MrAmbig
#Script Type:Powercli 5.8
#Description-set syslog servers and set syslog settings.
########################################################
#connect to vcenter
connect-viserver

#set the syslog servers
get-vmhost | Set-VmHostAdvancedConfiguration -Name syslog.global.loghost -value "1.1.1.1,8.8.8.8"
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.loggers.hostd.rotate -Value 80 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.loggers.hostd.size -Value 10240 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.loggers.vmkernel.rotate -Value 80 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.loggers.vmkernel.size -Value 10240 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.loggers.fdm.rotate -Value 80 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.loggers.vpxa.rotate -Value 20 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.global.defaultRotate -Value 20 -Confirm:$false
get-vmhost | Set-VmHostAdvancedConfiguration -Name Syslog.global.defaultSize -Value 10240 -Confirm:$false
get-vmhost | Set-VMHostFirewallException -Name "syslog" -enabled:$true
