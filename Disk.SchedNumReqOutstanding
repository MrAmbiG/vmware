#REQUIRES -Version 0.1

<#
.SYNOPSIS
    set the Disk.SchedNumReqOutstanding
	
.DESCRIPTION
    You have to run the esxcli storage core device set -d naa.******* -O 256
	against each naa id after listing them all on a host. It eases the same process
	by automating certain aspects of the process.
.NOTES
    File Name      : Disk.SchedNumReqOutstanding.txt
    Author         : ambig1;twitter/MrAmbiG1 (jean-paul_blanc@silogix-fr.com)
    Prerequisite   : esxi shell
    Copyright      - None/Free
.LINK
    Script posted over: 
    

#>

#list the naa numbers and then export/append to a file
esxcli storage core path list | grep -i "Device: mpx" | cut -c 11-99 >> /opt/naa.txt

#set the Disk.SchedNumReqOutstanding to 256
esxcli storage core device set -d "$(< /opt/naa.txt)" -O 256

#remove the naa.txt
rm /opt/naa.txt
